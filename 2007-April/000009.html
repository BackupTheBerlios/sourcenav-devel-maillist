<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [SN-devel] [bart.vanrompaey2 at ua.ac.be: [sourcenav-patch] patch for	xref in batch mode]
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/sourcenav-devel/2007-April/index.html" >
   <LINK REL="made" HREF="mailto:sourcenav-devel%40lists.berlios.de?Subject=Re%3A%20%5BSN-devel%5D%20%5Bbart.vanrompaey2%40ua.ac.be%3A%20%5Bsourcenav-patch%5D%20patch%20for%0A%09xref%20in%20batch%20mode%5D&In-Reply-To=%3C20070423072448.GA3222%40fulmar.esl.co.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000008.html">
   <LINK REL="Next"  HREF="000010.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[SN-devel] [bart.vanrompaey2 at ua.ac.be: [sourcenav-patch] patch for	xref in batch mode]</H1>
    <B>Mark Thornber</B> 
    <A HREF="mailto:sourcenav-devel%40lists.berlios.de?Subject=Re%3A%20%5BSN-devel%5D%20%5Bbart.vanrompaey2%40ua.ac.be%3A%20%5Bsourcenav-patch%5D%20patch%20for%0A%09xref%20in%20batch%20mode%5D&In-Reply-To=%3C20070423072448.GA3222%40fulmar.esl.co.uk%3E"
       TITLE="[SN-devel] [bart.vanrompaey2 at ua.ac.be: [sourcenav-patch] patch for	xref in batch mode]">mark.thornber at mdcr.org
       </A><BR>
    <I>Mon Apr 23 09:24:49 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000008.html">[SN-devel] db crashes
</A></li>
        <LI>Next message: <A HREF="000010.html">[SN-devel] [PATCH] new patch for xref in batch mode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9">[ date ]</a>
              <a href="thread.html#9">[ thread ]</a>
              <a href="subject.html#9">[ subject ]</a>
              <a href="author.html#9">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>----- Forwarded message from Van Rompaey Bart &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/sourcenav-devel">bart.vanrompaey2 at ua.ac.be</A>&gt; -----

Date: Wed, 18 Apr 2007 23:13:31 +0200
From: Van Rompaey Bart &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/sourcenav-devel">bart.vanrompaey2 at ua.ac.be</A>&gt;
To: <A HREF="https://lists.berlios.de/mailman/listinfo/sourcenav-devel">sourcenav-patch at lists.sourceforge.net</A>
Subject: [sourcenav-patch] patch for xref in batch mode
Reply-To: <A HREF="https://lists.berlios.de/mailman/listinfo/sourcenav-devel">sourcenav-patch at lists.sourceforge.net</A>


Hi,

Although this mailing-list seems quit dead, I'd still like to share a fix correcting the xref generation part in batch mode: the .by and .to tables are generated as well now. We use the tables generated by Source Navigator in our fact extraction tool chain (<A HREF="http://www.lore.ua.ac.be/Research/Artefacts/fetch/">http://www.lore.ua.ac.be/Research/Artefacts/fetch/</A>).

Index: misc.tcl
===================================================================
RCS file: /cvsroot/sourcenav/src/snavigator/gui/misc.tcl,v
retrieving revision 1.26
diff -u -r1.26 misc.tcl
--- misc.tcl    8 Jan 2004 04:03:56 -0000       1.26
+++ misc.tcl    18 Apr 2007 20:26:33 -0000
@@ -995,6 +995,10 @@
     fconfigure ${fd} \
         -encoding utf-8 \
         -blocking 0
+    if {[sn_batch_mode]} {
+       file delete -- ${xfer_file}
+       exit 0
+    }
     fileevent ${fd} readable [list load_xref_pipe ${fd} ${xfer_file}]
 }

@@ -1928,7 +1932,7 @@
     # file scanning is done and the symbol browser shows up.
     if {${xfer_file} != &quot;&quot; &amp;&amp; [file exists ${xfer_file}] &amp;&amp; [file size\
       ${xfer_file}] &gt; 0} {
-        after 1000 [list sn_load_xref ${xfer_file} ${cbrowser_xref}]
+        sn_load_xref ${xfer_file} ${cbrowser_xref}
     }

     catch {paf_db_proj sync}

-------------------------------------------------------------------------
This SF.net email is sponsored by DB2 Express
Download DB2 Express C - the FREE version of DB2 express and take
control of your XML. No limits. Just data. Click to get it now.
<A HREF="http://sourceforge.net/powerbar/db2/">http://sourceforge.net/powerbar/db2/</A>
_______________________________________________
sourcenav-patch mailing list
<A HREF="https://lists.berlios.de/mailman/listinfo/sourcenav-devel">sourcenav-patch at lists.sourceforge.net</A>
<A HREF="https://lists.sourceforge.net/lists/listinfo/sourcenav-patch">https://lists.sourceforge.net/lists/listinfo/sourcenav-patch</A>


----- End forwarded message -----

-- 
Mark Thornber

=========================
E M Thornber CEng MIET
Enchanted Systems Limited
Software Toolsmiths
+44 (0) 1503 272097

Registered in England No: 3595651
Registered Office:
    Little Garth, Talland Hill,
    Polperro, LOOE, Cornwall
    PL13 2JL
VAT No: GB 717 7967 83

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000008.html">[SN-devel] db crashes
</A></li>
	<LI>Next message: <A HREF="000010.html">[SN-devel] [PATCH] new patch for xref in batch mode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9">[ date ]</a>
              <a href="thread.html#9">[ thread ]</a>
              <a href="subject.html#9">[ subject ]</a>
              <a href="author.html#9">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/sourcenav-devel">More information about the Sourcenav-devel
mailing list</a><br>
</body></html>
